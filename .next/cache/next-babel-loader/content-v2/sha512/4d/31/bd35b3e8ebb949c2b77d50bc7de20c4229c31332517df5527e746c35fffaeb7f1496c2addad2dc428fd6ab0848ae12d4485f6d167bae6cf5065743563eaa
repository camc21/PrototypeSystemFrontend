{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\PROJETOS\\\\PrototypeSystemFrontend\\\\pages\\\\anime\\\\index.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport { Button } from 'primereact/button';\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport { Fieldset } from 'primereact/fieldset';\nimport { AnimeDataService } from '../../services/AnimeDataService';\nexport async function getServerSideProps(ctx) {\n  const isAuthenticated = req => {\n    var _req$headers;\n\n    if (!(req !== null && req !== void 0 && (_req$headers = req.headers) !== null && _req$headers !== void 0 && _req$headers.cookie)) {\n      return undefined;\n    }\n\n    const match = req.headers.cookie.split(';').find(item => item.trim().startsWith('token'));\n\n    if (!match) {\n      return undefined;\n    }\n\n    return match.split('=')[1];\n  };\n\n  if (!isAuthenticated(ctx.req)) {\n    ctx.res.writeHead(303, {\n      Location: '/login'\n    });\n    ctx.res.end();\n  }\n\n  return {\n    props: {}\n  };\n}\nexport default function Anime(props) {\n  console.log('Anime');\n  const {\n    0: listaAnimes,\n    1: setListaAnimes\n  } = useState([]);\n  const {\n    0: animeSelecionado,\n    1: setAnimeSelecionado\n  } = useState({});\n  const router = useRouter();\n  useEffect(() => {\n    listarAnimes();\n  }, []);\n\n  function listarAnimes() {\n    AnimeDataService.listarAnimes().then(response => {\n      console.log(response.data);\n      setListaAnimes(response.data);\n    });\n  }\n\n  function listarAnimesPorId(idAnime) {\n    AnimeDataService.listarAnimesPorId(idAnime).then(response => {\n      console.log(response.data);\n      setAnimeSelecionado(response.data);\n    });\n  }\n\n  const actionBodyTemplate = rowData => {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        style: {\n          marginRight: '10px'\n        },\n        icon: \"pi pi-pencil\",\n        className: \"p-button-rounded p-button-success p-mr-2\",\n        onClick: () => console.log(rowData)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        icon: \"pi pi-trash\",\n        className: \"p-button-rounded p-button-warning\",\n        onClick: () => console.log(rowData)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Fieldset, {\n      legend: \"Anime\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(DataTable, {\n          value: listaAnimes,\n          selectionMode: \"single\",\n          selection: animeSelecionado,\n          onSelectionChange: e => {\n            setAnimeSelecionado(e.value);\n          },\n          dataKey: \"idAnime\",\n          children: [/*#__PURE__*/_jsxDEV(Column, {\n            field: \"nome\",\n            header: \"Nome\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Column, {\n            field: \"temporada\",\n            header: \"Temporada\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Column, {\n            field: \"possuiManga\",\n            header: \"Possui mang\\xE1 ?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Column, {\n            body: actionBodyTemplate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}","map":{"version":3,"sources":["D:/PROJETOS/PrototypeSystemFrontend/pages/anime/index.jsx"],"names":["React","useState","useEffect","useRouter","Button","DataTable","Column","Fieldset","AnimeDataService","getServerSideProps","ctx","isAuthenticated","req","headers","cookie","undefined","match","split","find","item","trim","startsWith","res","writeHead","Location","end","props","Anime","console","log","listaAnimes","setListaAnimes","animeSelecionado","setAnimeSelecionado","router","listarAnimes","then","response","data","listarAnimesPorId","idAnime","actionBodyTemplate","rowData","marginRight","e","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/router'\r\n\r\nimport { Button } from 'primereact/button';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport { Fieldset } from 'primereact/fieldset';\r\n\r\nimport { AnimeDataService } from '../../services/AnimeDataService';\r\n\r\nexport async function getServerSideProps(ctx) {\r\n    const isAuthenticated = (req) => {\r\n      if (!req?.headers?.cookie) {\r\n        return undefined;\r\n      }\r\n  \r\n      const match = req.headers.cookie\r\n        .split(';')\r\n        .find((item) => item.trim().startsWith('token'));\r\n  \r\n      if (!match) {\r\n        return undefined;\r\n      }\r\n  \r\n      return match.split('=')[1];\r\n    };\r\n  \r\n    if (!isAuthenticated(ctx.req)) {\r\n      ctx.res.writeHead(303, { Location: '/login' });\r\n      ctx.res.end();\r\n    }\r\n  \r\n    return { props: {} };\r\n  }\r\n\r\n\r\nexport default function Anime(props) {\r\n    console.log('Anime');\r\n\r\n    const [listaAnimes, setListaAnimes] = useState([]);\r\n    const [animeSelecionado, setAnimeSelecionado] = useState({});\r\n\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        listarAnimes();\r\n    }, [])\r\n\r\n    function listarAnimes(){\r\n        AnimeDataService.listarAnimes().then(response => {\r\n            console.log(response.data);\r\n            setListaAnimes(response.data);\r\n        })\r\n    }\r\n\r\n    function listarAnimesPorId(idAnime){\r\n        AnimeDataService.listarAnimesPorId(idAnime).then(response => {\r\n            console.log(response.data);\r\n            setAnimeSelecionado(response.data);\r\n        })\r\n    }\r\n\r\n    const actionBodyTemplate = (rowData) => {\r\n        return (\r\n            <>\r\n                <Button style={{marginRight: '10px'}} icon=\"pi pi-pencil\" className=\"p-button-rounded p-button-success p-mr-2\" onClick={() => console.log(rowData)} />\r\n                <Button icon=\"pi pi-trash\" className=\"p-button-rounded p-button-warning\" onClick={() => console.log(rowData)} />\r\n            </>\r\n        );\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <Fieldset legend=\"Anime\">\r\n                <div className='container'>\r\n                    <DataTable \r\n                        value={listaAnimes}\r\n                        selectionMode=\"single\"\r\n                        selection={animeSelecionado}\r\n                        onSelectionChange={e => {setAnimeSelecionado(e.value)}}\r\n                        dataKey=\"idAnime\">\r\n                        <Column field=\"nome\" header=\"Nome\"></Column>\r\n                        <Column field=\"temporada\" header=\"Temporada\"></Column>\r\n                        <Column field=\"possuiManga\" header=\"Possui mangá ?\"></Column>\r\n                        <Column body={actionBodyTemplate}></Column>\r\n                    </DataTable>\r\n                </div>\r\n            </Fieldset>\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}